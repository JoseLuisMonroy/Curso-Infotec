<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluacion javaScript</title>
</head>
    <body onload="mostrarArticulos()">
    <div>
        <h1 class="Encabezado" >Administracion de articulos</h1>
    </div>
    <div id="Informacion">
    </div>
    <div id = "Modificar" >
        <p>Codigo: 
        <input type="number" id="codigo" name="codigo" value="" placeholder="Ingrese el codigo del articulo" required></p>
        <p>Descripcion:
        <input type="text" id="descripcion" name="descripcion" value="" placeholder="Ingrese la descripcion del articulo" required></p>
        <p>Precio:
        <input type="number" id="precio" name="precio" value="" placeholder="Ingrese el precio del articulo" required></p>
        <button onclick="modificarArticulo()">Modificar</button>
        <button onclick="agregarArticulo()">Agregar</button>
    </div>
    <div>
    </div>
    </body>
    <script>
        let articulos = [];
        articulos[0] = [1, "papas", 10.55];
        articulos[1] = [2, "manzanas", 12.1];
        articulos[2] = [3, "melon", 52.3];
        articulos[3] = [4, "cebollas", 17];
        articulos[4] = [5, "calabaza", 20];

        function mostrarArticulos(){
            let acumulador = 0;
            for(let i=0; i<5; i++){
                acumulador += articulos[i];
            }
            let tabla = document.createElement("table");
            tabla.border = "1";
            let fila = document.createElement("tr");
            let celda1 = document.createElement("th");
            let celda2 = document.createElement("th");
            let celda3 = document.createElement("th");
            let celda4 = document.createElement("th");
            let celda5 = document.createElement("th");
            let texto1 = document.createTextNode("Codigo");
            let texto2 = document.createTextNode("Descripcion");
            let texto3 = document.createTextNode("Precio");
            let texto4 = document.createTextNode("Borrar");
            let texto5 = document.createTextNode("Seleccionar");
            celda1.appendChild(texto1);
            celda2.appendChild(texto2);
            celda3.appendChild(texto3);
            celda4.appendChild(texto4);
            celda5.appendChild(texto5);
            fila.appendChild(celda1);
            fila.appendChild(celda2);
            fila.appendChild(celda3);
            fila.appendChild(celda4);
            fila.appendChild(celda5);
            tabla.appendChild(fila);
            for (let i = 0; i < articulos.length; i++) {
                let fila = document.createElement("tr");
                let celda1 = document.createElement("td");
                let celda2 = document.createElement("td");
                let celda3 = document.createElement("td");
                let celda4 = document.createElement("td");
                let celda5 = document.createElement("td");
                let texto1 = document.createTextNode(articulos[i][0]);
                let texto2 = document.createTextNode(articulos[i][1]);
                let texto3 = document.createTextNode(articulos[i][2]);
                let botonBorrar = document.createElement("input");
                botonBorrar.type = "button";
                botonBorrar.value = "Borrar";
                botonBorrar.id = "boton"+i;
                botonBorrar.onclick = function(){
                    borraArticulo(this.id);
                }
                let botonSeleccionar = document.createElement("input");
                botonSeleccionar.type = "button";
                botonSeleccionar.value = "Seleccionar";
                botonSeleccionar.id = "boton"+i;
                botonSeleccionar.onclick = function(){
                    seleccionarArticulo(this.id);
                }
                celda1.appendChild(texto1);
                celda2.appendChild(texto2);
                celda3.appendChild(texto3);
                celda4.appendChild(botonBorrar);
                celda5.appendChild(botonSeleccionar);
                fila.appendChild(celda1);
                fila.appendChild(celda2);
                fila.appendChild(celda3);
                fila.appendChild(celda4);
                fila.appendChild(celda5);
                tabla.appendChild(fila);
            }
            document.getElementById("Informacion").appendChild(tabla);
        }
        function borraArticulo(id){
            alert("Esta seguro de borrar el articulo?");
            let codigo = id.substr(id.length - 1);
            codigo = parseInt(codigo) + 1;
            for (let i = 0; i < articulos.length; i++) {
                if (articulos[i][0] == codigo) {
                    articulos.splice(i, 1);
                }
            }
            document.getElementById("Informacion").innerHTML = "";
            this.mostrarArticulos();
        }
        function seleccionarArticulo(id){
            let codigo = id.substr(id.length - 1);
            codigo = parseInt(codigo) + 1;
            for (let i = 0; i < articulos.length; i++) {
                if (articulos[i][0] == codigo) {
                    document.getElementById("codigo").value = articulos[i][0];
                    document.getElementById("descripcion").value = articulos[i][1];
                    document.getElementById("precio").value = articulos[i][2];
                }
            }
        }
        function agregarArticulo(){
            let codigo = document.getElementById("codigo").value;
            let descripcion = document.getElementById("descripcion").value;
            let precio = document.getElementById("precio").value;
            let articulo = [codigo, descripcion, precio];
            let existe = false;
            for (let i = 0; i < articulos.length; i++) {
                if (articulos[i][0] == codigo) {
                    existe = true;
                }
            }
            if (existe) {
                alert("El codigo ya existe");
                return;
            }
            if (codigo == 0) {
                alert("El codigo no puede ser cero");
                return;
            }
            articulos.push(articulo);
            document.getElementById("Informacion").innerHTML = "";
            this.mostrarArticulos();
        }
        function modificarArticulo(){
            let codigo = document.getElementById("codigo").value;
            let descripcion = document.getElementById("descripcion").value;
            let precio = document.getElementById("precio").value;
            let articulo = [codigo, descripcion, precio];
            let existe = false;
            for (let i = 0; i < articulos.length; i++) {
                if (articulos[i][0] == codigo) {
                    articulos[i][1] = descripcion;
                    articulos[i][2] = precio;
                    existe = true;
                }
            }
            if (!existe) {
                alert("El codigo no existe");
                return;
            }
            document.getElementById("Informacion").innerHTML = "";
            this.mostrarArticulos();
        }
    </script>
</html>